sudo: false
addons:
  apt_packages:
  - lib32stdc++6
env:
- SMVERSION=1.9
- SMVERSION=1.10
install:
- wget --input-file=http://sourcemod.net/smdrop/$SMVERSION/sourcemod-latest-linux
- tar -xzf $(cat sourcemod-latest-linux)
before_script:
- cd addons/sourcemod/scripting/
- git clone https://github.com/Franc1sco/sm-zombiereloaded-3-Franug-Edition.git zrsrc
- rm -r ./zrsrc/src/testsuite/
- cp -rl ./zrsrc/src/include/ ./
- mv ./zrsrc/src/zr/ ./
- rm -rf ./zrsrc/
- chmod +x spcomp
- mkdir compiled compiled/zrleader
script: "./compile.sh leader2.sp"
before_deploy:
- cd compiled/zrleader
- cd ../../../
- mkdir zrLeader zrLeader/addons zrLeader/addons/sourcemod zrLeader/addons/sourcemod/configs
  zrLeader/addons/sourcemod/scripting zrLeader/addons/sourcemod/scripting/include
- mv scripting/leader2.sp zrLeader/addons/sourcemod/scripting/
- mv scripting/compiled zrLeader/addons/sourcemod/plugins
- mv scripting/include/* zrLeader/addons/sourcemod/scripting/include/
- mv ../../materials zrLeader/
- zip -rq zrLeader zrLeader
- tar -czf zrLeader.tar.gz zrLeader
notifications:
  email: false
deploy:
  provider: releases
  api_key:
    secure: Nq0AKazaH9ZSr8Jg/LOwuh70VGNQ8JlcYaPNY+iqz/ZXrTvVTJp9fdi43hpWr8ocgucri1IkREm9npFQ6fmKZdP4ncoCf1e4gxRgX9/qsn7IPqG63TyAvcynh/tNStEHiwwsv1WPZvzd4x2FdA/4g5kmwy0HpiVSAUKspoKiuYjuZMA2b71kspaghUuJNgvUViX0SZI31pe/aWW5L3mhJm/nRTTI6jhIN79qWIe0FJjnmAGXadCHiC3yObHYDc8XdYVbLImBAK1DpW3Lr0SZ+6ZlwS9rIOS/jK0VdcRiPLvgStMMzhQWRjWepFvecvBOE7UXm8chaIPDHzuNuWeswZhiaqRAdFyDtMBE12EfXP1hHdXxzFWKtT4olpjQh7XvSIZwnOOrZ8Y2OjTXV0u5KGAfoLPtq9AdrepVpB6pQLas4NVziExwTHy+gnw9s5kVNtXR/JCbHzH5CHruBWptNvt+abuaY0fOOfkoATV5NML/+SPQkKZxzNEx/eTP+nUjxt1if7heUDIfc0IVjsXh/vPD1eGpApmrAyfVCAqb45lT6Ja2MDLNnhNNrkoFbzz9Jt2OGMjD4awmNmAjNZk8zHKBIMnddNAxoMRCPbKjZM4X14/MyFB4jag2hBnoPp7VrS2DksvblQgyUDH5nqKyQ8Do4hVvR9eulpFXOvybhzo=
  file: 
    - zrLeader.zip
    - zrLeader.tar.gz
    - zrLeader/addons/sourcemod/plugins/leader2.smx
    - zrLeader/addons/sourcemod/scripting/leader2.sp
  on:
    repo: Locomotivers/zrLeader
